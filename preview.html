<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Ticket</title>

<style>
    .division{
        position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: green;
  color: white;
  font-size: 24px;
  text-align: center;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
    }

    .division p{
        
  font-size: 36px;
  margin-top: 20px;

    }
</style>

</head>
<body>

  <h1></h1>

  <div id="output" class="division"></div>

  <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
  <script src="https://www.gstatic.com/firebasejs/8.3.3/firebase-app.js"></script>

  <!-- Firebase Realtime Database -->
  <script src="https://www.gstatic.com/firebasejs/8.3.3/firebase-database.js"></script>

  <script src="script.js"></script>

    <script>
var work;
        // Initialize Firebase
var firebaseConfig = {
    apiKey: "AIzaSyAdWDlfS78Wua8tA-AMgSv8-rFovUbKZg4",

authDomain: "comma-1c541.firebaseapp.com",

databaseURL: "https://comma-1c541-default-rtdb.firebaseio.com",

projectId: "comma-1c541",

storageBucket: "comma-1c541.appspot.com",

messagingSenderId: "161046185569",

appId: "1:161046185569:web:698833bc31ecff49a08c20",

measurementId: "G-MS1BT0D1Q6"
  // Your Firebase config here
};
firebase.initializeApp(firebaseConfig);

// Get a reference to the database service
var database = firebase.database();


// Read data once from the database
database.ref("/").once("value")
  .then(function(snapshot) {
    var data = snapshot.val();
    console.log(data);
    work = data.text;
    var outputDiv = document.getElementById("output");
   
  
    var csvValues = work.split(",");
    csvValues[0] = parseInt(csvValues[0]) + 1;
    outputDiv.innerHTML = 'Your ticket is: <br>  ' + csvValues[csvValues[0]];
    var updatedText = csvValues.join(",");
    console.log("updated text is "+ updatedText);
        var text = updatedText;        database.ref().set({
          text: text
        });
        alert("Saved!");
})
  .catch(function(error) {
    console.error("Error reading data: ", error);
  });




    </script>


</body>
</html>
